#Script to get data from DECODE, GWAS catalog and eQTLgen

#Make sure you are in T1DSCREEN/data

#Get T1D data from gwas catalog (Chiou et al.)
wget http://ftp.ebi.ac.uk/pub/databases/gwas/summary_statistics/GCST90014001-GCST90015000/GCST90014023/harmonised/34012112-GCST90014023-EFO_0001359.h.tsv.gz
wget http://ftp.ebi.ac.uk/pub/databases/gwas/summary_statistics/GCST90014001-GCST90015000/GCST90014023/harmonised/md5sum.txt
wget http://ftp.ebi.ac.uk/pub/databases/gwas/summary_statistics/GCST90014001-GCST90015000/GCST90014023/README.txt

#Get T1D data from gwas catalog (Robertson et al.)
wget http://ftp.ebi.ac.uk/pub/databases/gwas/summary_statistics/GCST90013001-GCST90014000/GCST90013445/GCST90013445_buildGRCh38.tsv
wget http://ftp.ebi.ac.uk/pub/databases/gwas/summary_statistics/GCST90013001-GCST90014000/GCST90013445/README.txt
wget http://ftp.ebi.ac.uk/pub/databases/gwas/summary_statistics/GCST90013001-GCST90014000/GCST90013445/md5sum.txt


#Get eQTLgen data
wget https://molgenis26.gcc.rug.nl/downloads/eqtlgen/cis-eqtl/2019-12-11-cis-eQTLsFDR-ProbeLevel-CohortInfoRemoved-BonferroniAdded.txt.gz
wget https://molgenis26.gcc.rug.nl/downloads/eqtlgen/cis-eqtl/2018-07-18_SNP_AF_for_AlleleB_combined_allele_counts_and_MAF_pos_added.txt.gz
wget https://molgenis26.gcc.rug.nl/downloads/eqtlgen/cis-eqtl/README_cis

#To get DECODE go to
# Summary statistics of proteins can be downloaded at
# https://www.decode.com/summarydata/ under 2021 and
#
# Ferkingstad, E. et al. Large-scale integration of the plasma proteome with genetics and disease. Summary data (list).
# Extra annotation (430 MB). Excluded variants (52 MB)  Read me file (2 KB).
#
# Direct links to downloads (you have to fill a form first)
# Summary data (list): https://download.decode.is/form/folder/proteomics
#    -> 2620_4_IL6ST_gp130__soluble.txt.gz (decompress to get to 2620_4_IL6ST_gp130__soluble.txt)
#    -> save to data/import/
# Extra annotation: https://download.decode.is/form/2021/assocvariants.annotated.txt.gz
#    -> assocvariants.annotated.txt.gz (decompress to get to assocvariants.annotated.txt)
#    -> save to data/import/
# Readme file: https://download.decode.is/form/2021/proteomics_readme.txt
#    -> proteomics_readme.txt
#    -> save to data/import/

#For internal use try
wget https://download.decode.is/s3/download?token=c1bbd243-510e-498b-94f7-3b1aad118fd5&file=2620_4_IL6ST_gp130__soluble.txt.gz
wget https://download.decode.is/s3/download?token=c1bbd243-510e-498b-94f7-3b1aad118fd5&file=2620_4_IL6ST_gp130__soluble.txt.md5sum

#decompress data
zcat -d assocvariants.annotated.txt.gz > assocvariants.annotated.txt
zcat -d 2620_4_IL6ST_gp130__soluble.txt.gz > 2620_4_IL6ST_gp130__soluble.txt
zcat -d 34012112-GCST90014023-EFO_0001359.h.tsv.gz > 34012112-GCST90014023-EFO_0001359.h.tsv
zcat -d 2019-12-11-cis-eQTLsFDR-ProbeLevel-CohortInfoRemoved-BonferroniAdded.txt.gz > cis-EQTL-full.txt
zcat -d 2018-07-18_SNP_AF_for_AlleleB_combined_allele_counts_and_MAF_pos_added.txt.gz > cis-EQTL-AF.txt

#Move data to imports
mv *.tsv imports/
mv *.txt imports/
mv README_cis imports/
